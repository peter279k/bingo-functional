<!doctype html>
<html class="lazyload" lang="en">
    <head>
        <title>functors · functors-docs</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
        <meta name="description" content="Documentation for functors">
        <link rel="icon" type="image/png" href="https://ace411.github.io/bingo-functional/icon.png">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Share:400|Jaldi:400,700|Fira+Mono:400,700">
        <link rel="stylesheet" href="https://ace411.github.io/bingo-functional/assets/base.css">
        <link rel="stylesheet" href="https://ace411.github.io/bingo-functional/assets/lindoc.css">
        <style>
            a,.results strong{color:#a6a2a2}
            button,input[type=submit],input[type=button],input[type=reset],.button,.search input[type=submit]{background-color:#a6a2a2}
            .search input[type=text]:focus,.results,.results strong{border-color:#a6a2a2 !important}
            @media screen and (min-width:1450px){.livetoc a.active{ color:#a6a2a2}}
        </style>
        <script>
            // Parent Elements - e.P("body") - https://gist.github.com/moqmar/0995cf6595201f7a062fb173cb4ab938
            (function(E){E.matches||(E.matches=E.matchesSelector||E.msMatchesSelector||E.webkitMatchesSelector)})(Element.prototype)
            Element.prototype.P=function(s){var e=this
            if(!s||typeof s=="number")for(var i=0;i<(s||1);i++)e=e?e.parentElement:e
            else if(typeof s=="string")while(e&&!e.matches(s))e=e.parentElement
            else while(e&&e!=s)e=e.parentElement
            return e}
        </script>
    </head>
    <body>
        <header>
            <h1>
                <a href="https://ace411.github.io/bingo-functional/"><img src="bingo-functional-logo.png" alt="functors-docs"></a>
            </h1>
            <!-- THIS DOCUMENT IS INDEXED -->
            <div class="search" role="search"><form data-baseurl="https://ace411.github.io/bingo-functional" onsubmit="search(this); return false;">
                <input type="text" class="search-query" oninput="search(this.parentElement)" placeholder="Search...">
                <input type="submit" value="➜">
            </form><div class="results"></div></div>
            <div class="language">
                <input type="checkbox" id="language-select">
                <label for="language-select"><img src="https://ace411.github.io/bingo-functional/assets/flags/en.png"></label>
                <div class="language-select-popup" data-default-language="en">
                    <a href="https://ace411.github.io/bingo-functional/functors.html"><img src="https://ace411.github.io/bingo-functional/assets/flags/en.png"></a>
                </div>
                <script>
                    document.getElementById("language-select").checked = false;
                    window.addEventListener("click", function(event) {
                        if (!event.target.P(".language")) document.getElementById("language-select").checked = false;
                    })
                </script>
            </div>
            <nav class="breadcrumbs">
                <a href="https://ace411.github.io/bingo-functional/">functors-docs</a> » <strong>functors</strong>
            </nav>
        </header>

        <main>
            <aside class="toc"><ul></ul></aside>
            <article>
                <template search-description>Documentation for functors</template>

                <nav class="pagination">
                    <div>« <a href="https://ace411.github.io/bingo-functionalpattern-matching.html">Pattern Matching</a></div>
                    <div><a href="https://ace411.github.io/bingo-functionalrepl.html">Console</a> »</div>
                </nav>

<!-- CONTENT START -->
<p>A functor is an entity derived from Category Mathematics. Functors allow one to map functions to one or more values defined in their context. Functors are, therefore, the data structures that form the basis for Monads, Applicatives, Just/Nothing types, and Left/Right types.</p>
<h2 id="applicatives">Applicatives</h2>
<p>An applicative is a functor which conforms to certain laws - interchange, map, identity, and homomorphism. The most pervasive element of applicatives is the ability to apply a function to the values in their context.</p>
<p>Functions, arrays, objects, and primitives can be encapsulated in Applicatives.</p>
<pre><code class="language-php">use Chemem\Bingo\Functional\Functors\{CollectionApplicative, Applicative};

$num = Applicative::pure(10); //should return an integer, 10 encapsulated in an Applicative object

$addTen = Applicative::pure(
    function (int $a) : int {
        return $a + 10;
    }
); //should return a Closure object encapsulated in an Applicative object</code></pre>
<h3 id="collectionapplicatives">CollectionApplicatives</h3>
<p>Applicatives and CollectionApplicatives are not entirely dissimilar. The latter functors are indeed applicatives but more amenable to the creation of <a href="http://hackage.haskell.org/package/base-4.10.0.0/docs/Control-Applicative.html#v:ZipList">ziplists</a>, which are, fundamentally, traversable data structures.</p>
<pre><code class="language-php">$zipList = CollectionApplicative::pure([
    $addTen,
    function (int $a) : int {
        return $a * 10;
    }
])
-&gt;apply(
    CollectionApplicative::pure([1, 2, 3])
)
-&gt;getValues();
//should return [11, 12, 13, 10, 20, 30]</code></pre>
<p><strong>Using the apply method</strong></p>
<p>The apply method is simply a means of binding an argument to a function defined in the context of an Applicative. It is especially convenient for state transformations within a functor environment.</p>
<pre><code class="language-php">
$addTen-&gt;apply($num)
    -&gt;getValue(); //should return 20</code></pre>
<h2 id="monad">Monad</h2>
<p>The monad implementation in this library is a simple one. Considering the existence of a complete genealogy of monads, the monad class in this library is a microcosm of the feature. Monads allow us to manipulate values within their context like Applicatives but return monads of the same type when functions are bound to them.</p>
<pre><code class="language-php">use Chemem\Bingo\Functional\Functors\Monad;

$val = Monad::return(10)
    -&gt;bind(
        function (int $val) : int {
            return $val + 10;
        }
    ); //returns the value 10 encapsulated in a Monad object</code></pre>
<p><strong><em>Monads</em></strong> map functions onto values stored inside their contexts whereas <strong><em>Applicatives</em></strong> bind values to the functions stored inside theirs.</p>
<p><strong>Note:</strong> As of version 1.4.0, the Monad class will not be available. Refer to the <a href="https://github.com/ace411/bingo-functional/blob/master/docs/changes.html">change log</a> for more details.</p>
<h3 id="the-io-monad">The IO Monad</h3>
<p>The IO monad is one built purposely for handling impure operations. Impure operations are those that break referential transparency and immutability. Database interactions, web service interaction, as well as external file reads are impediments to referential transparency.</p>
<pre><code class="language-php">use Chemem\Bingo\Functional\Functors\Monads\IO;

$readFromFile = function () : string {
    return file_get_contents('path/to/file');
};

$io = IO::of($readFromFile)
    -&gt;map('strtoupper')
    -&gt;bind('var_dump')
    -&gt;exec();
//should output the contents of a text file in uppercase</code></pre>
<h3 id="the-writer-monad">The Writer Monad</h3>
<p>The Writer monad is designed to make tracking state changes less cumbersome. Unique in its design are a logging mechanism and state transformation helper functions.</p>
<pre><code class="language-php">use Chemem\Bingo\Functional\Functors\Monads\Writer;

list($result, $log) = Writer::of(2, 'Initialize')
    -&gt;bind(
        function (int $x) : int {
            return $x + 2;
        },
        'Add 2 to x val'
    )
    -&gt;run();

echo $log;
//should output messages 'Initialize' and 'Add 2 to x val'</code></pre>
<h3 id="the-reader-monad">The Reader Monad</h3>
<p>Environment variables, like impure operations, break referential transparency. The Reader monad is a solution to the problem of interacting with an external environment. The monad localizes state changes to ensure that functions are kept pure.</p>
<pre><code class="language-php">use Chemem\Bingo\Functional\Functors\Monads\Reader;

function ask(string $content) : Reader
{
    return Reader::of(
        function (string $name) use ($content) {
            return $content . ($name === 'World' ? '' : ' How are you?'); 
        }
    );
}

function sayHello(string $name) : string
{
    return 'Hello ' . $name;
}

$reader = Reader::of('sayHello')
    -&gt;withReader('ask')
    -&gt;run('World');

echo $reader; //should output Hello World</code></pre>
<h3 id="the-state-monad">The State Monad</h3>
<p>Similar to the Reader monad is the State monad which works best in situations which require both the transformed and initial states.</p>
<pre><code class="language-php">use Chemem\Bingo\Functional\Functors\Monads\State;

function addThree(int $val) : int
{
    return $val + 3;
}

function multiplyByTen(int $val) : int
{
    return $val * 10;
}

list($original, $finalState) = State::of(2)
    -&gt;evalState('addThree')
    -&gt;map('multiplyByTen')
    -&gt;exec();

echo $original; //should output 2
echo $finalState; //should output 50</code></pre>
<h3 id="the-list-monad">The List Monad</h3>
<p>The List Monad is used to generate a set of values for a given collection - something akin to a zip list. The List Monad operates on the principle of <a href="https://en.wikipedia.org/wiki/Nondeterministic_algorithm">non-determinism</a>.</p>
<pre><code class="language-php">use Chemem\Bingo\Functional\Functors\Monads\ListMonad;

function multiplyByTwo(int $val) : int
{
    return $val * 2;
}

$list = ListMonad::of(1, 2, 3)
    -&gt;bind('multiplyByTwo')
    -&gt;extract();
//should evaluate to [2, 4, 6, 1, 2, 3]</code></pre>
<h2 id="maybe-leftnothing-types">Maybe Left/Nothing types</h2>
<p>Borrowed from Haskell is the Maybe type which is composed of two subtypes, Just, and Nothing. The Just type is a functor to which one can bind a value intended for transformation whereas the Nothing type is a null value.</p>
<h3 id="maybe-methods">Maybe methods</h3>
<ul>
<li><strong>fromValue()</strong></li>
</ul>
<p>The <code>fromValue()</code> method is one used to bind a value to a Maybe type depending on whether the argument supplied is null or not.</p>
<pre><code class="language-php">$val = Maybe::fromValue(10); //returns 10 encapsulated in a Right type object

$anotherVal = Maybe::fromValue(null); //returns Nothing - a null value

$yetAnotherVal = Maybe::fromValue(9, 9); //returns Nothing as the Just value and Nothing value cannot be the same</code></pre>
<ul>
<li><strong>isJust() and isNothing()</strong></li>
</ul>
<p>The <code>isJust()</code> and <code>isNothing()</code> methods simply return boolean values to indicate whether values are either of the Just type or the Nothing type.</p>
<pre><code class="language-php">
$var = Maybe::fromValue(33)
    -&gt;isJust(); //returns true

$anotherVar = Maybe::fromValue(null)
    -&gt;isNothing(); //returns true</code></pre>
<h2 id="either-leftright-types">Either Left/Right types</h2>
<p>Also borrowed from Haskell is the Either type which, like the Maybe type is comprised of two subtypes which are Left and Right. Naturally, the correct value, the one to be transformed, is an appendage of the Right type class. The error value is the constituent of the Left type class.</p>
<pre><code class="language-php">use Chemem\Bingo\Functional\Functors\Either\{Either, Left, Right};

$val = Either::right(12); //correct value encapsulated in Right type
$err = Either::left('Invalid integer'); //error value encapsulated in Left type</code></pre>
<h3 id="either-methods">Either methods</h3>
<ul>
<li><strong>partitionEithers()</strong></li>
</ul>
<p>As is the case with Haskell, the <code>partitionEithers()</code> method transforms an array of Either type items into a multidimensional array of left and right indexed sub-arrays.</p>
<pre><code class="language-php">
$eithers = [Either::right(12), Either::right(10), Either::left('Invalid Integer')];

$partitionedEithers = Either::partitionEithers($eithers);
//should return ['left' =&gt; ['Invalid Integer'], 'right' =&gt; [12, 10]]</code></pre>
<h3 id="common-methods">Common methods</h3>
<ul>
<li><strong>filter()</strong></li>
</ul>
<p>The <code>filter()</code> method is one that returns a value which, in this case can be either Right or Just based on a boolean predicate. Usage is similar for both Right and Just types but slightly different for the former functor which requires an error value.</p>
<pre><code class="language-php">$justVal = Maybe::just(2)
    -&gt;filter(
        function (int $a) : bool {
            return is_int($a);
        }
    ); //should return 2 encapsulated in a Just type object

$rightval = Either::right('12')
    -&gt;filter(
        function (string $a) : bool {
            return is_numeric($a);
        },
        'Value is not a numeric string'
    ); //should return '12' encapsulated in a Right type object</code></pre>
<ul>
<li><strong>map()</strong></li>
</ul>
<p>The <code>map()</code> method makes it possible to mutate functor context by enabling function binding.</p>
<pre><code class="language-php">
$justVal-&gt;map(
    function (int $a) : int {
        return $a + 10;
    }
); //should return 12 encapsulated in a Just type object
//should work in a similar way for Right type objects</code></pre>
<ul>
<li><strong>flatMap()</strong></li>
</ul>
<p>The <code>flatMap()</code> method works in a manner similar to the <code>map()</code> method but returns a non-encapsulated value.</p>
<pre><code class="language-php">
$justVal-&gt;flatMap(
    function (int $a) : int {
        return $a * 10;
    }
); //should return 20</code></pre>
<ul>
<li><strong>orElse()</strong></li>
</ul>
<p>The <code>orElse()</code> method returns a current value if there is one or a given value if there is one.</p>
<pre><code class="language-php">$user = Either::right(get_current_user())
    -&gt;orElse(
        Either::right('foo')
    ); //returns foo if the current script owner is not defined</code></pre>
<ul>
<li><strong>lift()</strong></li>
</ul>
<p>The <code>lift()</code> function allows functions expressed in point-free style or otherwise to accept Maybe type values or Either values as arguments.</p>
<pre><code class="language-php">function add(int $a, int $b) : int
{
    return $a + $b;
}

$maybeLifted = Maybe::lift('add');
$eitherLifted = Either::lift('add', Either::left('Invalid Operation'));

$maybeLifted(
    Maybe::just(1),
    Maybe::just(2)
); //returns 3 encapsulated in a Just type object

$eitherLifted(
    Either::right(1),
    Either::right(2)
);
//returns 3 encapsulated in a Right type object</code></pre>
<!-- CONTENT END -->
                <nav class="pagination">
                    <div>« <a href="https://ace411.github.io/bingo-functionalpattern-matching.html">Pattern Matching</a></div>
                    <div><a href="https://ace411.github.io/bingo-functionalrepl.html">Console</a> »</div>
                </nav>
            </article>
            <aside class="sidebar">
                <hr>
                <h2>Links</h2>
                <div class="bulletlink"><a href="index.html">Install</a></div>
                <div class="bulletlink"><a href="functions.html">Function Helpers</a></div>
                <div class="bulletlink"><a href="collection.html">Collection Helpers</a></div>
                <div class="bulletlink"><a href="pattern-matching.html">Pattern Matching</a></div>
                <div class="bulletlink"><a href="functors.html">Functors</a></div>
                <div class="bulletlink"><a href="repl.html">Console</a></div>
                <div class="bulletlink"><a href="changes.html">Changes</a></div>
            </aside>
            <footer>
                <hr>

<!-- FOOTER BEGIN -->
bingo-functional 2018 - Built by Lochemem Bruno Michael
<!-- FOOTER END -->

            </footer>
        </main>

        <script src="https://ace411.github.io/bingo-functional/assets/toc.js"></script>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.6.0/prism.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.6.0/plugins/autoloader/prism-autoloader.min.js"></script>
        <script>Prism.plugins.autoloader.languages_path = "https://cdnjs.cloudflare.com/ajax/libs/prism/1.6.0/components/";</script>
        <link rel="stylesheet" href="https://ace411.github.io/bingo-functional/assets/prism.css">

        <script src="https://cdn.jsdelivr.net/npm/js-search@1.4.2/dist/umd/js-search.min.js"></script>
        <script src="https://ace411.github.io/bingo-functional/assets/search.js"></script>
    </body>
</html>
